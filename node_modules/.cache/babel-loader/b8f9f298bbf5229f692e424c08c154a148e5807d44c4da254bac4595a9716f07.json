{"ast":null,"code":"import _objectSpread from\"/Users/aj.didonato/Desktop/requestr/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import ArtistSearch from'./ArtistSearch';import RequestForm from'./RequestForm';import PublicQueue from'./PublicQueue';import{artistsAPI,requestsAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserView=()=>{const[selectedArtist,setSelectedArtist]=useState(null);const[requests,setRequests]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleArtistSelect=async artistUsername=>{setLoading(true);setError('');try{// Get artist profile\nconst artistResponse=await artistsAPI.getProfile(artistUsername);setSelectedArtist(artistResponse.data);// Get artist's requests\nconst requestsResponse=await requestsAPI.getByArtist(artistUsername);setRequests(requestsResponse.data);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||'Artist not found');setSelectedArtist(null);setRequests([]);}finally{setLoading(false);}};const handleRequestSubmit=async requestData=>{try{const response=await requestsAPI.create(_objectSpread(_objectSpread({},requestData),{},{artist_username:selectedArtist.username}));// Add new request to the list\nsetRequests(prev=>[...prev,response.data]);return{success:true};}catch(err){var _err$response2,_err$response2$data;return{success:false,error:((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'Failed to submit request'};}};const refreshQueue=async()=>{if(selectedArtist){try{const response=await requestsAPI.getByArtist(selectedArtist.username);setRequests(response.data);}catch(err){console.error('Failed to refresh queue:',err);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{paddingBottom:'80px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"safe-area-top\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"text-center mb-8 mt-6\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDFB5 Requestr\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Request songs from live musicians\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(ArtistSearch,{onArtistSelect:handleArtistSelect,loading:loading,error:error})}),selectedArtist&&/*#__PURE__*/_jsx(\"div\",{className:\"card mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-2\",children:selectedArtist.display_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-0\",children:[\"@\",selectedArtist.username]}),selectedArtist.bio&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mt-4 mb-0\",children:selectedArtist.bio})]})}),selectedArtist&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(RequestForm,{onSubmit:handleRequestSubmit,artistName:selectedArtist.display_name})}),selectedArtist&&/*#__PURE__*/_jsx(PublicQueue,{requests:requests,artistName:selectedArtist.display_name,onRefresh:refreshQueue})]})});};export default UserView;","map":{"version":3,"names":["React","useState","ArtistSearch","RequestForm","PublicQueue","artistsAPI","requestsAPI","jsx","_jsx","jsxs","_jsxs","UserView","selectedArtist","setSelectedArtist","requests","setRequests","loading","setLoading","error","setError","handleArtistSelect","artistUsername","artistResponse","getProfile","data","requestsResponse","getByArtist","err","_err$response","_err$response$data","response","detail","handleRequestSubmit","requestData","create","_objectSpread","artist_username","username","prev","success","_err$response2","_err$response2$data","refreshQueue","console","className","style","paddingBottom","children","onArtistSelect","display_name","bio","onSubmit","artistName","onRefresh"],"sources":["/Users/aj.didonato/Desktop/requestr/frontend/src/components/UserView/UserView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport ArtistSearch from './ArtistSearch';\nimport RequestForm from './RequestForm';\nimport PublicQueue from './PublicQueue';\nimport { artistsAPI, requestsAPI } from '../../services/api';\n\nconst UserView = () => {\n  const [selectedArtist, setSelectedArtist] = useState(null);\n  const [requests, setRequests] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleArtistSelect = async (artistUsername) => {\n    setLoading(true);\n    setError('');\n    \n    try {\n      // Get artist profile\n      const artistResponse = await artistsAPI.getProfile(artistUsername);\n      setSelectedArtist(artistResponse.data);\n      \n      // Get artist's requests\n      const requestsResponse = await requestsAPI.getByArtist(artistUsername);\n      setRequests(requestsResponse.data);\n    } catch (err) {\n      setError(err.response?.data?.detail || 'Artist not found');\n      setSelectedArtist(null);\n      setRequests([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRequestSubmit = async (requestData) => {\n    try {\n      const response = await requestsAPI.create({\n        ...requestData,\n        artist_username: selectedArtist.username\n      });\n      \n      // Add new request to the list\n      setRequests(prev => [...prev, response.data]);\n      return { success: true };\n    } catch (err) {\n      return {\n        success: false,\n        error: err.response?.data?.detail || 'Failed to submit request'\n      };\n    }\n  };\n\n  const refreshQueue = async () => {\n    if (selectedArtist) {\n      try {\n        const response = await requestsAPI.getByArtist(selectedArtist.username);\n        setRequests(response.data);\n      } catch (err) {\n        console.error('Failed to refresh queue:', err);\n      }\n    }\n  };\n\n  return (\n    <div className=\"container\" style={{ paddingBottom: '80px' }}>\n      <div className=\"safe-area-top\">\n        <header className=\"text-center mb-8 mt-6\">\n          <h1>ðŸŽµ Requestr</h1>\n          <p className=\"text-gray-600\">Request songs from live musicians</p>\n        </header>\n\n        {/* Artist Search */}\n        <div className=\"mb-8\">\n          <ArtistSearch \n            onArtistSelect={handleArtistSelect}\n            loading={loading}\n            error={error}\n          />\n        </div>\n\n        {/* Selected Artist Info */}\n        {selectedArtist && (\n          <div className=\"card mb-6\">\n            <div className=\"card-body\">\n              <h2 className=\"mb-2\">{selectedArtist.display_name}</h2>\n              <p className=\"text-gray-600 mb-0\">@{selectedArtist.username}</p>\n              {selectedArtist.bio && (\n                <p className=\"text-gray-700 mt-4 mb-0\">{selectedArtist.bio}</p>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Request Form */}\n        {selectedArtist && (\n          <div className=\"mb-8\">\n            <RequestForm \n              onSubmit={handleRequestSubmit}\n              artistName={selectedArtist.display_name}\n            />\n          </div>\n        )}\n\n        {/* Public Queue */}\n        {selectedArtist && (\n          <PublicQueue \n            requests={requests}\n            artistName={selectedArtist.display_name}\n            onRefresh={refreshQueue}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}